<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-127329943-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
  <title>Frank&#39;s development blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Frank&apos;s development blog - Java, Rails, Python, Solr, Samvera, Hyrax, Blacklights">
<meta name="keywords" content="Java, Rails, Python, Solr, Samvera, Hyrax, Blacklights">
<meta property="og:type" content="website">
<meta property="og:title" content="Frank&#39;s development blog">
<meta property="og:url" content="https://yfrankfeng.github.io/index.html">
<meta property="og:site_name" content="Frank&#39;s development blog">
<meta property="og:description" content="Frank&apos;s development blog - Java, Rails, Python, Solr, Samvera, Hyrax, Blacklights">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Frank&#39;s development blog">
<meta name="twitter:description" content="Frank&apos;s development blog - Java, Rails, Python, Solr, Samvera, Hyrax, Blacklights">
  
    <link rel="alternate" href="/atom.xml" title="Frank&#39;s development blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Frank&#39;s development blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Java, Rails, Python, Solr, Samvera, Hyrax, Blacklights</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://yfrankfeng.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-hyrax-content-blocks" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/hyrax-content-blocks/" class="article-date">
  <time datetime="2019-10-29T12:40:12.000Z" itemprop="datePublished">2019-10-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hyrax/">hyrax</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/hyrax-content-blocks/">How does Hyrax content blocks work?</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>To add a new content block page, you need to follow steps below:</p>
<h2 id="Register-a-new-content-block-in-models"><a href="#Register-a-new-content-block-in-models" class="headerlink" title="Register a new content block in models"></a>Register a new content block in models</h2><p>app/models/content_block.rb</p>
<pre><code>def help_page
  find_by(name: &apos;help_page&apos;) ||
    create(name: &apos;help_page&apos;, value: default_help_text)
end
</code></pre><p>and</p>
<pre><code>def default_help_text
  ERB.new(
    IO.read(
        Rails.root.join(&apos;app&apos;, &apos;views&apos;, &apos;hyrax&apos;, &apos;content_blocks&apos;, &apos;templates&apos;, &apos;help.html.erb&apos;)
    )
  ).result
end
</code></pre><h2 id="Template-file"><a href="#Template-file" class="headerlink" title="Template file"></a>Template file</h2><p>app/views/hyrax/content_blocks/templates</p>
<p>just add any HTML you like to the template file, e.g. help.html.erb</p>
<p>Still Not showing the new page content?</p>
<p>You need to delete the record in the database ‘content_blocks’ table</p>
<h2 id="Add-a-new-content-block-tab-in-Admin-page"><a href="#Add-a-new-content-block-tab-in-Admin-page" class="headerlink" title="Add a new content block tab in Admin page"></a>Add a new content block tab in Admin page</h2><p>app/views/hyrax/content_blocks/_form.html.erb</p>
<p>On the top, add:</p>
<pre><code>&lt;li&gt;
  &lt;a href=&quot;#help&quot; role=&quot;tab&quot; data-toggle=&quot;tab&quot; class=&quot;nav-safety-confirm&quot;&gt;&lt;%= t(:&apos;hyrax.content_blocks.tabs.help&apos;) %&gt;&lt;/a&gt;
&lt;/li&gt;
</code></pre><p>On the bottom, add:</p>
<pre><code>&lt;div id=&quot;help&quot; class=&quot;tab-pane&quot;&gt;
  &lt;div class=&quot;panel panel-default labels&quot;&gt;
    &lt;%= simple_form_for ContentBlock.for(:help), url: hyrax.content_block_path(ContentBlock.for(:help)), html: {class: &apos;nav-safety&apos;} do |f| %&gt;
      &lt;div class=&quot;panel-body&quot;&gt;
        &lt;div class=&quot;field form-group&quot;&gt;
          &lt;%= f.label :help %&gt;&lt;br /&gt;
          &lt;%= f.text_area :help, value: f.object.value, class: &apos;form-control tinymce&apos;, rows: 20, cols: 120 %&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class=&quot;panel-footer&quot;&gt;
        &lt;%= link_to t(:&apos;hyrax.content_blocks.cancel&apos;), hyrax.admin_admin_sets_path, class: &apos;btn btn-default pull-right&apos; %&gt;
        &lt;%= f.button :submit, class: &apos;btn btn-primary pull-right&apos; %&gt;
      &lt;/div&gt;
    &lt;% end %&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre><h2 id="Content-block-controller"><a href="#Content-block-controller" class="headerlink" title="Content block controller"></a>Content block controller</h2><p>Copy content_blocks_controller.rb from app/controllers/hyrax to NCELP and update the following:</p>
<pre><code>params.require(:content_block).permit(:marketing,
                                      :announcement,
                                      :researcher,
                                      :help)
</code></pre><h2 id="Update-locale-file"><a href="#Update-locale-file" class="headerlink" title="Update locale file"></a>Update locale file</h2><p>Edit config/locales/hyrax.en.yml, and add:</p>
<pre><code>hyrax:
  content_blocks:
    help: Help
</code></pre><h2 id="Add-a-menu-in-the-menubar"><a href="#Add-a-menu-in-the-menubar" class="headerlink" title="Add a menu in the menubar"></a>Add a menu in the menubar</h2><p>Edit app/views/_controls.html.erb, and add:</p>
<pre><code>&lt;li &lt;%= &apos;class=active&apos; if current_page?(hyrax.about_path) %&gt;&gt;
    &lt;%= link_to t(:&apos;hyrax.controls.about&apos;), hyrax.about_path, aria: current_page?(hyrax.about_path) ? {current: &apos;page&apos;} : nil %&gt;&lt;/li&gt;   
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://yfrankfeng.github.io/hyrax-content-blocks/" data-id="ck2byutc60000vz05lqcmuka4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/content-blocks/">content blocks</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hyrax/">hyrax</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/samvera/">samvera</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-how-to-disable-download-notification-for-a-user" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/how-to-disable-download-notification-for-a-user/" class="article-date">
  <time datetime="2019-10-08T21:40:12.000Z" itemprop="datePublished">2019-10-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/System/">System</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/how-to-disable-download-notification-for-a-user/">How to disable download notifications to authors in IRIS</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>The following steps mainly for IRIS admins who left IRIS team, but the email notifications are still triggered. Tons of undelivered email may result in the suspension of the IRIS admin email account.</p>
<p>1) Open yodl.properties file, and find object PID, e.g. with key iris.userMappings.</p>
<p>2) Open the fedora object in Fedora admin web UI.</p>
<p>3) Find matched ownerid for a particular email from UserMapping datastream.</p>
<p>4) Run the following RI query to find user’s profile object id:</p>
<pre><code>select $object
from &lt;#ri&gt;
where $object &lt;fedora-model:hasModel&gt; &lt;fedora:york:CModel-User&gt;
and $object &lt;info:fedora/fedora-system:def/model#ownerId&gt; &apos;THE_ABOVE_OWNERID&apos;
order by $object
</code></pre><p>5) Open user profile object in Fedora Web UI and open User datastream.</p>
<p>6) Change notifyDownloads to ‘false’</p>
<pre><code>&lt;notifyDownloads&gt;false&lt;/notifyDownloads&gt;
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://yfrankfeng.github.io/how-to-disable-download-notification-for-a-user/" data-id="ck1j33wqw00004405jczltdl2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IRIS/">IRIS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/notification/">notification</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ruby-aws-lambda" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/ruby-aws-lambda/" class="article-date">
  <time datetime="2019-10-03T21:40:12.000Z" itemprop="datePublished">2019-10-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/AWS/">AWS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/ruby-aws-lambda/">Develop an AWS Lambda with Ruby</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Install-jets-and-create-project"><a href="#Install-jets-and-create-project" class="headerlink" title="Install jets and create project"></a>Install jets and create project</h2><pre><code>gem install jets
jets new dad-jokes-sms --mode api --no-database
jets serve --host 0.0.0.0
</code></pre><p>Then try to access the app from localhost:8888</p>
<pre><code>jets generate controller Messages create
</code></pre><h2 id="Implement-the-application-in-the-local-environment"><a href="#Implement-the-application-in-the-local-environment" class="headerlink" title="Implement the application in the local environment"></a>Implement the application in the local environment</h2><p>Edit config/routes.rb</p>
<pre><code>post &apos;messages&apos;, to: &apos;messages#create&apos;
root &quot;jets/public#show&quot;
</code></pre><p>Replace message_controller.rb with following:</p>
<pre><code>require &apos;open-uri&apos;

class MessagesController &lt; ApplicationController
 def create
   twiml = Twilio::TwiML::MessagingResponse.new
   twiml.message body: random_joke
   render xml: twiml.to_xml
 end

 private
   def random_joke
     open(&apos;https://icanhazdadjoke.com/&apos;, { &apos;Accept&apos; =&gt; &apos;text/plain&apos; }).read
   end
end
</code></pre><p>Add following to Gemfile:</p>
<pre><code>gem &quot;jets&quot;
gem &quot;twilio-ruby&quot;
</code></pre><p>Run:</p>
<pre><code>bundle install
</code></pre><p>Restart Jets and run:</p>
<pre><code>curl --data &quot;&quot; http://localhost:8888/messages
</code></pre><h2 id="AWS-setup"><a href="#AWS-setup" class="headerlink" title="AWS setup"></a>AWS setup</h2><p>In AWS IAM, create a policy, choose “json” and paste the following:</p>
<pre><code>{
 &quot;Version&quot;: &quot;2012-10-17&quot;,
 &quot;Statement&quot;: [
 {
 &quot;Effect&quot;: &quot;Allow&quot;,
 &quot;Action&quot;: [
 &quot;apigateway:*&quot;,
 &quot;cloudformation:*&quot;,
 &quot;dynamodb:*&quot;,
 &quot;events:*&quot;,
 &quot;iam:*&quot;,
 &quot;lambda:*&quot;,
 &quot;logs:*&quot;,
 &quot;route53:*&quot;,
 &quot;s3:*&quot;
 ],
 &quot;Resource&quot;: [
 &quot;*&quot;
 ]
 }
 ]
}
</code></pre><p>Add name/desc and click “Create”.</p>
<p>Create a user: jets-user<br>With this option: Programmatic access</p>
<p>Attach jets-policy to jets-user</p>
<p>Then you will have the access key and secret. </p>
<h2 id="Deploy-it-to-AWS"><a href="#Deploy-it-to-AWS" class="headerlink" title="Deploy it to AWS"></a>Deploy it to AWS</h2><p>Run the following command:</p>
<pre><code>AWS_ACCESS_KEY_ID=XXXXXX AWS_SECRET_ACCESS_KEY=XXXXXX jets deploy
</code></pre><p><strong>If you have a problem complaining about jsych, try to add it into Gemfile and bundle install.</strong></p>
<p>If successful, you should see something like:</p>
<pre><code>Uploading s3://dad-jokes-sms-dev-s3bucket-1iez1o87ck0t0/jets/public/index.html
Uploading s3://dad-jokes-sms-dev-s3bucket-1iez1o87ck0t0/jets/public/422.html
Uploading s3://dad-jokes-sms-dev-s3bucket-1iez1o87ck0t0/jets/public/404.html
Time for public assets to s3: 0s
Deploying CloudFormation stack with jets app!
10:20:57AM UPDATE_IN_PROGRESS AWS::CloudFormation::Stack dad-jokes-sms-dev User Initiated
10:20:59AM CREATE_IN_PROGRESS AWS::Lambda::LayerVersion GemLayer 
10:20:59AM CREATE_IN_PROGRESS AWS::IAM::Role IamRole 
10:20:59AM CREATE_IN_PROGRESS AWS::CloudFormation::Stack ApiGateway 
10:21:00AM CREATE_IN_PROGRESS AWS::IAM::Role IamRole Resource creation Initiated
10:21:00AM CREATE_IN_PROGRESS AWS::CloudFormation::Stack ApiGateway Resource creation Initiated
10:21:11AM CREATE_COMPLETE AWS::CloudFormation::Stack ApiGateway 
10:21:11AM CREATE_COMPLETE AWS::IAM::Role IamRole 
10:21:12AM CREATE_IN_PROGRESS AWS::CloudFormation::Stack ApiResources1 
10:21:12AM CREATE_IN_PROGRESS AWS::Lambda::LayerVersion GemLayer Resource creation Initiated
10:21:12AM CREATE_COMPLETE AWS::Lambda::LayerVersion GemLayer 
10:21:13AM CREATE_IN_PROGRESS AWS::CloudFormation::Stack ApiResources1 Resource creation Initiated
10:21:14AM CREATE_IN_PROGRESS AWS::CloudFormation::Stack JetsPreheatJob 
10:21:15AM CREATE_IN_PROGRESS AWS::CloudFormation::Stack JetsPreheatJob Resource creation Initiated
10:21:23AM CREATE_COMPLETE AWS::CloudFormation::Stack ApiResources1 
10:21:25AM CREATE_IN_PROGRESS AWS::CloudFormation::Stack JetsPublicController 
10:21:25AM CREATE_IN_PROGRESS AWS::CloudFormation::Stack MessagesController 
10:21:25AM CREATE_IN_PROGRESS AWS::CloudFormation::Stack JetsPublicController Resource creation Initiated
10:21:26AM CREATE_IN_PROGRESS AWS::CloudFormation::Stack MessagesController Resource creation Initiated
10:21:47AM CREATE_COMPLETE AWS::CloudFormation::Stack JetsPublicController 
10:21:47AM CREATE_COMPLETE AWS::CloudFormation::Stack MessagesController 
10:21:49AM CREATE_IN_PROGRESS AWS::CloudFormation::Stack ApiDeployment20190926102055 
10:21:50AM CREATE_IN_PROGRESS AWS::CloudFormation::Stack ApiDeployment20190926102055 Resource creation Initiated
10:22:00AM CREATE_COMPLETE AWS::CloudFormation::Stack ApiDeployment20190926102055 
10:22:49AM CREATE_COMPLETE AWS::CloudFormation::Stack JetsPreheatJob 
10:22:50AM UPDATE_COMPLETE_CLEANUP_IN_PROGRESS AWS::CloudFormation::Stack dad-jokes-sms-dev 
10:22:51AM UPDATE_COMPLETE AWS::CloudFormation::Stack dad-jokes-sms-dev 
Stack success status: UPDATE_COMPLETE
Time took for stack deployment: 1m 58s.
Prewarming application.
API Gateway Endpoint: https://XXXXXXXX.execute-api.eu-west-2.amazonaws.com/dev/
</code></pre><p>Test it with curl:</p>
<pre><code>curl --data &quot;&quot; https://XXXXXXXX.execute-api.eu-west-2.amazonaws.com/dev/messages
</code></pre><h2 id="Some-AWS-cli-commands"><a href="#Some-AWS-cli-commands" class="headerlink" title="Some AWS cli commands:"></a>Some AWS cli commands:</h2><p>To list all your apigateway endpoints:</p>
<pre><code>aws apigateway get-rest-apis
</code></pre><p>Show all lambda functions:</p>
<pre><code>aws lambda list-functions | grep FunctionName
</code></pre><h2 id="Delete-the-AWS-resources"><a href="#Delete-the-AWS-resources" class="headerlink" title="Delete the AWS resources"></a>Delete the AWS resources</h2><pre><code>AWS_ACCESS_KEY_ID=XXXXXXXX AWS_SECRET_ACCESS_KEY=XXXXXXXX jets delete
</code></pre><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p><a href="https://www.infoq.cn/article/FSPhFgYw769V*brbEyJW" target="_blank" rel="noopener">https://www.infoq.cn/article/FSPhFgYw769V*brbEyJW</a><br><a href="https://www.twilio.com/blog/serverless-ruby-on-aws-lambda-with-the-jets-framework" target="_blank" rel="noopener">https://www.twilio.com/blog/serverless-ruby-on-aws-lambda-with-the-jets-framework</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yfrankfeng.github.io/ruby-aws-lambda/" data-id="ck1c0wtj100005205esosyt3j" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/aws/">aws</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ruby/">ruby</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-python-aws-lambda" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/python-aws-lambda/" class="article-date">
  <time datetime="2019-10-03T21:40:12.000Z" itemprop="datePublished">2019-10-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/AWS/">AWS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/python-aws-lambda/">Develop an AWS Lambda with Python</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Install-serverless-framework"><a href="#Install-serverless-framework" class="headerlink" title="Install serverless framework"></a>Install serverless framework</h2><pre><code>npm install -g serverless
</code></pre><h2 id="Create-the-project"><a href="#Create-the-project" class="headerlink" title="Create the project"></a>Create the project</h2><pre><code>mkdir -p hello-world
cd hello-world
serverless create --template aws-python3 --name hello-world
</code></pre><h2 id="Create-AWS-user"><a href="#Create-AWS-user" class="headerlink" title="Create AWS user"></a>Create AWS user</h2><p>Create a user, e.g. serverless-user and add the access key and secret access key in the .aws/credentials:</p>
<pre><code>[serverless]
aws_access_key_id = XXXXXXXXXXXXXXXXXXXXXXX
aws_secret_access_key = XXXXXXXXXXXXXXXXXXXXXXX
</code></pre><h2 id="Deploy-first-attempt"><a href="#Deploy-first-attempt" class="headerlink" title="Deploy - first attempt"></a>Deploy - first attempt</h2><pre><code>export AWS_PROFILE=&quot;serverless&quot;
serverless deploy  --region eu-west-1
</code></pre><p>Till now, you won’t see the APIGateway endpoint as it hasn’t been defined yet.</p>
<p>Edit serverless.yml:</p>
<pre><code>events:
    - http:
        path: hello
        method: get
</code></pre><p>Then run:</p>
<pre><code>serverless deploy -v
</code></pre><p>You will see the endpoint like: <a href="https://XXXXXXXXXX.execute-api.us-east-1.amazonaws.com/dev" target="_blank" rel="noopener">https://XXXXXXXXXX.execute-api.us-east-1.amazonaws.com/dev</a></p>
<p>The service can be tested by this command:</p>
<pre><code>sls invoke -f hello
</code></pre><p>Make sure to remove AWS resources when they are not needed:</p>
<pre><code>serverless remove
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://yfrankfeng.github.io/python-aws-lambda/" data-id="ck1c0dgao0000xo05eyld631w" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/aws/">aws</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-how-to-build-a-slack-bot-in-python" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/how-to-build-a-slack-bot-in-python/" class="article-date">
  <time datetime="2019-09-29T21:40:12.000Z" itemprop="datePublished">2019-09-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Python/">Python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/how-to-build-a-slack-bot-in-python/">How to build a Slack bot in Python</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Install-slackclient"><a href="#Install-slackclient" class="headerlink" title="Install slackclient"></a>Install slackclient</h2><pre><code>pip3 install slackclient
</code></pre><h2 id="Create-Slack-app"><a href="#Create-Slack-app" class="headerlink" title="Create Slack app"></a>Create Slack app</h2><p>Visit: <a href="https://api.slack.com/apps" target="_blank" rel="noopener">https://api.slack.com/apps</a> to create a new bot</p>
<p><img src="https://user-images.githubusercontent.com/437701/65965620-d433dd80-e456-11e9-90d2-9a028a561813.png" alt="image"></p>
<p>In the following window, choose ‘Bots’</p>
<p><img src="https://user-images.githubusercontent.com/437701/65965695-f299d900-e456-11e9-8db0-997f251ede79.png" alt="image"></p>
<p>Add a bot user, e.g. ‘myalertbot’</p>
<p>Click your app, then click ‘Install your app to your workspace’.</p>
<p>Then you will have OAuth Access token and Bot User OAuth Access token.</p>
<h2 id="Send-messages-in-Slack-bot"><a href="#Send-messages-in-Slack-bot" class="headerlink" title="Send messages in Slack bot"></a>Send messages in Slack bot</h2><pre><code>import os
import slack

client = slack.WebClient(token=&apos;SLACK_API_TOKEN&apos;)
response = client.chat_postMessage(channel=&apos;#my channel&apos;, text=&quot;Hello world!&quot;)
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://yfrankfeng.github.io/how-to-build-a-slack-bot-in-python/" data-id="ck17vvq9s00003105id6mrrtk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/slack/">slack</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-python-tips" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/python-tips/" class="article-date">
  <time datetime="2019-09-16T21:40:12.000Z" itemprop="datePublished">2019-09-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Python/">Python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/python-tips/">Python tips</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><p>Use the new way to format string</p>
<pre><code>&apos;One for {name}, one for me.&apos;.format(name=name)
</code></pre><p>OR</p>
<pre><code>&apos;One for {}, one for me.&apos;.format(name)
</code></pre><p>NOT the old way:</p>
<pre><code>&quot;One for %s, one for me.&quot; % name
</code></pre><h2 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h2><p>Using sorted over sort, will create a fresh copy of the list and avoids possible side effects.</p>
<pre><code>sorted_array = sorted(scores,reverse=True)
</code></pre><p>Also, Python automatically detect array boundaries, so no need to check like:</p>
<pre><code>return sorted_array[0:3] if len(sorted_array)&gt;=3 else sorted_array
</code></pre><p>Just </p>
<pre><code>return sorted(scores,reverse=True)[0:3]     
</code></pre><p>Or even simpler:</p>
<pre><code>return sorted(scores,reverse=True)[:3]           
</code></pre><h2 id="Code-refactoring"><a href="#Code-refactoring" class="headerlink" title="Code refactoring"></a>Code refactoring</h2><p>The following code:</p>
<pre><code>def convert(number):
    the_string = &apos;&apos;
    if number % 3 == 0:
        the_string += &apos;Pling&apos;
    if number % 5 == 0:
        the_string += &apos;Plang&apos;
    if number % 7 == 0:
        the_string += &apos;Plong&apos;
    return the_string or str(number)
</code></pre><p>Can be shorter and nicer like:</p>
<pre><code>def convert(number):
    drops = ((3, &apos;Pling&apos;), (5, &apos;Plang&apos;), (7, &apos;Plong&apos;))

    the_string = [s for n, s in drops if number % n==0]
    return &quot;&quot;.join(the_string) or str(number)
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://yfrankfeng.github.io/python-tips/" data-id="ck0nyb2w000008m05gm1nghi7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-aws-tips" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/aws-tips/" class="article-date">
  <time datetime="2019-09-10T21:40:12.000Z" itemprop="datePublished">2019-09-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/AWS/">AWS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/aws-tips/">AWS tips</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="EC2"><a href="#EC2" class="headerlink" title="EC2"></a>EC2</h2><h3 id="SSH-command"><a href="#SSH-command" class="headerlink" title="SSH command"></a>SSH command</h3><p>After EC2 being created, the way to access EC2 instance is:</p>
<pre><code>ssh -i /home/frank/.ssh/aws.pem ubuntu@YOUR_IP
</code></pre><p>NB: the default user for Ubuntu is <strong>ubuntu</strong>.    </p>
<h3 id="Elastic-IP"><a href="#Elastic-IP" class="headerlink" title="Elastic IP"></a>Elastic IP</h3><p>To have a static IP to access your EC2, follow the following steps:</p>
<p>1) Create an elastic IP<br>2) Open elastic IP page and click “Associate address” from “Actions” dropdown.    </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yfrankfeng.github.io/aws-tips/" data-id="ck0fcsfjz0000ew05a492ppet" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AWS/">AWS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/EC2/">EC2</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Elastic-IP/">Elastic IP</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ruby-tips" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/ruby-tips/" class="article-date">
  <time datetime="2019-08-29T21:40:12.000Z" itemprop="datePublished">2019-08-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Ruby/">Ruby</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/ruby-tips/">Ruby tips</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Class-attributes"><a href="#Class-attributes" class="headerlink" title="Class attributes"></a>Class attributes</h2><p>Use of attribute readers (public/private)</p>
<pre><code>attr_reader :names
def initialize(names)
    @names = names
end
</code></pre><p>Then @names can be accessed via ‘names’</p>
<pre><code>def latest
    names.last
end
</code></pre><h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><pre><code>String.lines
</code></pre><p>Check if a string starts with any string from an array:</p>
<pre><code>prefixes=[&apos;Dr&apos;,&apos;Mr&apos;,&apos;Miss&apos;,&apos;Mrs&apos;]
&apos;Tom Smith&apos;.starts_with?(*prefixes)
=&gt; false
&apos;Mr Tom Smith&apos;.starts_with?(*prefixes)
=&gt; true        
</code></pre><h2 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h2><h3 id="Swap-array-rows-with-columns"><a href="#Swap-array-rows-with-columns" class="headerlink" title="Swap array rows with columns"></a>Swap array rows with columns</h3><pre><code>Array.transpose()
</code></pre><p>e.g.<br>    matrix_string = “1 2 3\n4 5 6\n7 8 9”<br>    @rows = matrix_string.lines.collect{|x| x.split.collect{|y| y.to_i}}<br>    @columns = @rows.transpose()    </p>
<h3 id="Remove-duplicate-elements-from-array"><a href="#Remove-duplicate-elements-from-array" class="headerlink" title="Remove duplicate elements from array"></a>Remove duplicate elements from array</h3><pre><code>array_name.uniq
</code></pre><p>OR use the following to operate on the same array</p>
<pre><code>array_name.uniq!
</code></pre><h3 id="each-cons"><a href="#each-cons" class="headerlink" title="each_cons"></a>each_cons</h3><pre><code>irb(main):001:0&gt; s = &quot;123456789&quot;
=&gt; &quot;123456789&quot;

irb(main):002:0&gt; s.chars
=&gt; [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;]

irb(main):003:0&gt; s.chars.each_cons(2).to_a
=&gt; [[&quot;1&quot;, &quot;2&quot;], [&quot;2&quot;, &quot;3&quot;], [&quot;3&quot;, &quot;4&quot;], [&quot;4&quot;, &quot;5&quot;], [&quot;5&quot;, &quot;6&quot;], [&quot;6&quot;, &quot;7&quot;], [&quot;7&quot;, &quot;8&quot;], [&quot;8&quot;, &quot;9&quot;]]

irb(main):004:0&gt; s.chars.each_cons(2).to_a.collect {|a| a.join}
=&gt; [&quot;12&quot;, &quot;23&quot;, &quot;34&quot;, &quot;45&quot;, &quot;56&quot;, &quot;67&quot;, &quot;78&quot;, &quot;89&quot;]    
</code></pre><p>The above expression can be simplified:</p>
<pre><code>irb(main):004:0&gt; s.chars.each_cons(2).collect(&amp;:join)
=&gt; [&quot;12&quot;, &quot;23&quot;, &quot;34&quot;, &quot;45&quot;, &quot;56&quot;, &quot;67&quot;, &quot;78&quot;, &quot;89&quot;]      
</code></pre><h2 id="Collections"><a href="#Collections" class="headerlink" title="Collections"></a>Collections</h2><p>Lots of internal methods can be used in collections, e.g.</p>
<pre><code>scores.last
scores.max
scores.min
scores.sort
soores.reverse
</code></pre><h2 id="Regular-expressions"><a href="#Regular-expressions" class="headerlink" title="Regular expressions"></a>Regular expressions</h2><h3 id="acronyms"><a href="#acronyms" class="headerlink" title="acronyms"></a>acronyms</h3><p>Question: convert a sentence to its acronym, e.g.</p>
<pre><code>Portable Network Graphics &gt; PNG
Ruby on Rails &gt; ROR
First In, First Out &gt; FIFO
Something - I made up from thin air &gt; SIMUFTA        
</code></pre><p>The easy solution is to use RE:</p>
<pre><code>def self.abbreviate(phrase)
    phrase.scan(/\b\w/).join.upcase
end
</code></pre><p>Scan with the regex /\b\w/ will catch ‘word boundaries’ (space, - and more) followed by a word character. This means that scan(/\b\w/) returns an array with the first letters only.    </p>
<h3 id="Word-counts"><a href="#Word-counts" class="headerlink" title="Word counts"></a>Word counts</h3><pre><code>phrase.downcase.scan(/\w+(?:&apos;\w+)*/).each { |w| counts[w] += 1 }
</code></pre><ul>
<li>\w+ - 1 or more word chars</li>
<li><p>(?:’\w+)<em> - zero or more sequences (as (?:…)</em> is a non-capturing group that groups a sequence of subpatterns quantified with * quantifier matching 0 or more occurrences) of:</p>
<ul>
<li>‘ - apostrophe</li>
<li><p>\w+ - 1 or more word chars.</p>
<p>phrase = “Joe can’t tell between ‘large’ and large.”<br>phrase.downcase.scan(/\w+(?:’\w+)*/).each { |w| counts[w] += 1 }</p>
<blockquote>
<blockquote>
</blockquote>
<p>{“joe”=&gt;1, “can’t”=&gt;1, “tell”=&gt;1, “between”=&gt;1, “large”=&gt;2, “and”=&gt;1}</p>
</blockquote>
</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yfrankfeng.github.io/ruby-tips/" data-id="cjzxw1akv0001bh05yr23udlh" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ruby/">ruby</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-configure-elk-stack-ubuntu" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/configure-elk-stack-ubuntu/" class="article-date">
  <time datetime="2019-08-25T21:40:12.000Z" itemprop="datePublished">2019-08-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/system/">system</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/configure-elk-stack-ubuntu/">Configure ELK stack in Ubuntu 18</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Specs"><a href="#Specs" class="headerlink" title="Specs"></a>Specs</h2><p>Virtual Box VM: 6GB RAM<br>Ubuntu 18.04 LTS</p>
<p>Make sure take a snapshot before starting</p>
<h2 id="Install-OpenJDK"><a href="#Install-OpenJDK" class="headerlink" title="Install OpenJDK"></a>Install OpenJDK</h2><pre><code>sudo apt -y update &amp;&amp; sudo apt -y upgrade
sudo apt-get install default-jre
</code></pre><p>Check:</p>
<pre><code>java -version
</code></pre><h2 id="Elasticsearch"><a href="#Elasticsearch" class="headerlink" title="Elasticsearch"></a>Elasticsearch</h2><pre><code>wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -
echo &quot;deb https://artifacts.elastic.co/packages/6.x/apt stable main&quot; | sudo tee -a /etc/apt/sources.list.d/elastic-6.x.list
sudo apt-get update
sudo apt-get install elasticsearch
</code></pre><p>Then edit configuration file:</p>
<pre><code>sudo nano /etc/elasticsearch/elasticsearch.yml
</code></pre><p>Add:</p>
<pre><code>network.host: &quot;localhost&quot;
http.port: 9200
</code></pre><p>Start elasticsearch:</p>
<pre><code>sudo service elasticsearch start
</code></pre><p>Test if it works:</p>
<pre><code>curl http://localhost:9200    
</code></pre><p>It should output a JSON:</p>
<pre><code>{
  &quot;name&quot; : &quot;8kGdx7L&quot;,
  &quot;cluster_name&quot; : &quot;elasticsearch&quot;,
  &quot;cluster_uuid&quot; : &quot;2O-282HlSSSptP9i2_L9Og&quot;,
  &quot;version&quot; : {
    &quot;number&quot; : &quot;6.8.3&quot;,
    &quot;build_flavor&quot; : &quot;default&quot;,
    &quot;build_type&quot; : &quot;deb&quot;,
    &quot;build_hash&quot; : &quot;0c48c0e&quot;,
    &quot;build_date&quot; : &quot;2019-08-29T19:05:24.312154Z&quot;,
    &quot;build_snapshot&quot; : false,
    &quot;lucene_version&quot; : &quot;7.7.0&quot;,
    &quot;minimum_wire_compatibility_version&quot; : &quot;5.6.0&quot;,
    &quot;minimum_index_compatibility_version&quot; : &quot;5.0.0&quot;
  },
  &quot;tagline&quot; : &quot;You Know, for Search&quot;
}    
</code></pre><p>The elasticsearch should NOT be accessiable externally. Especially in production, DO NOT open port 9200 to the world, as tons of bots are crawling for 9200. DO NOT bind elasticsearch to a public IP.</p>
<p>To make the service start on boot run:</p>
<pre><code>sudo update-rc.d elasticsearch defaults 95 10
</code></pre><p>Proxy Elasticsearch API via Nginx:</p>
<pre><code>location ~ ^/es(.*) {
   rewrite /es/(.*) /$1  break;
   proxy_pass http://localhost:9200;
}
</code></pre><p>and</p>
<pre><code>auth_basic &quot;Restricted Access&quot;;
auth_basic_user_file /etc/nginx/htpasswd.users;
</code></pre><h2 id="Elasticsearch-APIs"><a href="#Elasticsearch-APIs" class="headerlink" title="Elasticsearch APIs"></a>Elasticsearch APIs</h2><p>From Kibana: <a href="http://localhost/app/kibana#/dev_tools/console?_g=()" target="_blank" rel="noopener">http://localhost/app/kibana#/dev_tools/console?_g=()</a><br>Read this article: <a href="https://logz.io/blog/elasticsearch-api/" target="_blank" rel="noopener">https://logz.io/blog/elasticsearch-api/</a></p>
<p>Find all indices:<br>curl -X GET “localhost:9200/_cat/indices?v&amp;pretty”</p>
<p>Search for an IP from Nginx log (via filebeat):<br>curl -X GET “localhost:9200/filebeat-7.3.2-2019.09.24-000001/_search?q=10.0.2.2”</p>
<p>Search for all error messages:<br>curl -X GET “localhost:9200/filebeat-7.3.2-2019.09.24-000001/_search?q=ERROR&amp;pretty”</p>
<p>Search for adblocker.css<br>curl -X GET “localhost:9200/filebeat-7.3.2-2019.09.24-000001/_search?q=styles/ad-blocker.css&amp;pretty”</p>
<p>During development I’ve found this API call – just clear everything inside the database.</p>
<p>curl -X DELETE <a href="http://localhost:9200/_all" target="_blank" rel="noopener">http://localhost:9200/_all</a> {“acknowledged”:true}<br>I don’t want any user to run this command from anywhere. You can disable this by setting “action.destructive_requires_name” to “true” inside the configuration, but it is not the default.</p>
<h2 id="Logstash"><a href="#Logstash" class="headerlink" title="Logstash"></a>Logstash</h2><pre><code>sudo apt-get install logstash
sudo nano /etc/logstash/conf.d/10-syslog.conf
</code></pre><p>With content</p>
<p>input {<br>  file {<br>    type =&gt; “syslog”<br>    path =&gt; [ “/var/log/messages”, “/var/log/*.log” ]<br>  }<br>}<br>output {<br>  stdout {<br>    codec =&gt; rubydebug<br>    }<br>    elasticsearch {<br>      hosts =&gt; “localhost” # Use the internal IP of your Elasticsearch server<br>    }<br>}</p>
<p>Run</p>
<pre><code>sudo service logstash restart
sudo curl -XGET &apos;localhost:9200/_cat/indices?v&amp;pretty&apos;
</code></pre><p>You should see:</p>
<pre><code>health status index uuid pri rep docs.count docs.deleted store.size pri.store.size
</code></pre><h2 id="Kibana"><a href="#Kibana" class="headerlink" title="Kibana"></a>Kibana</h2><pre><code>sudo apt-get install kibana
sudo nano /etc/kibana/kibana.yml
</code></pre><p>Add:</p>
<pre><code>server.port: 5601
server.host: &quot;localhost&quot;
elasticsearch.url: &quot;http://localhost:9200&quot;
</code></pre><p>Run:<br>    sudo service kibana start</p>
<p>You will <strong>NOT</strong> be able to access Kibana right now, to fix this problem:</p>
<pre><code>sudo apt-get install nginx apache2-utils
sudo htpasswd -c /etc/nginx/htpasswd.users kibanaadmin
</code></pre><p>Enter a password</p>
<p>Then </p>
<pre><code>sudo nano /etc/nginx/sites-available/default
</code></pre><p>With content:</p>
<pre><code>auth_basic &quot;Restricted Access&quot;;
auth_basic_user_file /etc/nginx/htpasswd.users;

location / {
   proxy_pass http://localhost:5601;
   proxy_http_version 1.1;
   proxy_set_header Upgrade $http_upgrade;
   proxy_set_header Connection &apos;upgrade&apos;;
   proxy_set_header Host $host;
   proxy_cache_bypass $http_upgrade;
}
</code></pre><p>Restart Nginx</p>
<pre><code>sudo service nginx restart
</code></pre><p>Try to access via <a href="http://localhost" target="_blank" rel="noopener">http://localhost</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yfrankfeng.github.io/configure-elk-stack-ubuntu/" data-id="ck0s3fccl00008p05mnyq1vcp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/elasticsearch/">elasticsearch</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/elk/">elk</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kibana/">kibana</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/logstash/">logstash</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java-tips" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/java-tips/" class="article-date">
  <time datetime="2019-08-20T21:40:12.000Z" itemprop="datePublished">2019-08-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/java-tips/">Java tips</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><h3 id="String-Concatenation"><a href="#String-Concatenation" class="headerlink" title="String Concatenation"></a>String Concatenation</h3><p>String.format is extremely slow for a problem that only requires simple String concatenation with the + operator. </p>
<p>Read: <a href="https://redfin.engineering/java-string-concatenation-which-way-is-best-8f590a7d22a8" target="_blank" rel="noopener">https://redfin.engineering/java-string-concatenation-which-way-is-best-8f590a7d22a8</a></p>
<h3 id="Iterate-each-character-in-a-String"><a href="#Iterate-each-character-in-a-String" class="headerlink" title="Iterate each character in a String"></a>Iterate each character in a String</h3><pre><code>Map&lt;Character, Integer&gt; dict = new HashMap&lt;Character, Integer&gt;();  
&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;.chars().forEach(letter -&gt; dict.put((char) letter, 1));  
</code></pre><h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><p>To get a value from map if not null, can be something like this:</p>
<pre><code>int v = 0;
if(dict.get(c)!=null) {
    v += dict.get(c);
}   
</code></pre><p>It can be simplified to:</p>
<pre><code>v += dict.getOrDefault(c,0);
</code></pre><h2 id="Algorithms"><a href="#Algorithms" class="headerlink" title="Algorithms"></a>Algorithms</h2><h3 id="Sum-of-n-nn-nn-n"><a href="#Sum-of-n-nn-nn-n" class="headerlink" title="Sum of n, nn, nn*n"></a>Sum of n, n<em>n, n</em>n*n</h3><p>Rather than using loops, some formulas can be used to make O(1) algorithms:</p>
<p><img src="/images/sums.png" alt=""></p>
<p>Ref: <a href="https://brilliant.org/wiki/sum-of-n-n2-or-n3/" target="_blank" rel="noopener">https://brilliant.org/wiki/sum-of-n-n2-or-n3/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yfrankfeng.github.io/java-tips/" data-id="cjzxw1akj0000bh0589zvpa6v" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AWS/">AWS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Heroku/">Heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hyrax/">Hyrax</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/">Ruby</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/">System</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ubuntu/">Ubuntu</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blacklight/">blacklight</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hyrax/">hyrax</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ngrok/">ngrok</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/rails/">rails</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/samvera/">samvera</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/solr/">solr</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/system/">system</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AWS/">AWS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EC2/">EC2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elastic-IP/">Elastic IP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IRIS/">IRIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UI/">UI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue-js/">Vue.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/access-control/">access control</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aws/">aws</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blacklight/">blacklight</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blacklights/">blacklights</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/branch/">branch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cms/">cms</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/content-blocks/">content blocks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch/">elasticsearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elk/">elk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/facets/">facets</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fedora/">fedora</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/google/">google+</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hyrax/">hyrax</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kibana/">kibana</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logstash/">logstash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ngrok/">ngrok</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/notification/">notification</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oauth/">oauth</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rails/">rails</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/refinery/">refinery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ruby/">ruby</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/samvera/">samvera</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/slack/">slack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/solr/">solr</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tool/">tool</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue-js/">vue.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpacker/">webpacker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zsh/">zsh</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/AWS/" style="font-size: 10px;">AWS</a> <a href="/tags/EC2/" style="font-size: 10px;">EC2</a> <a href="/tags/Elastic-IP/" style="font-size: 10px;">Elastic IP</a> <a href="/tags/IRIS/" style="font-size: 10px;">IRIS</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/UI/" style="font-size: 10px;">UI</a> <a href="/tags/Vue-js/" style="font-size: 10px;">Vue.js</a> <a href="/tags/access-control/" style="font-size: 10px;">access control</a> <a href="/tags/aws/" style="font-size: 11.67px;">aws</a> <a href="/tags/blacklight/" style="font-size: 13.33px;">blacklight</a> <a href="/tags/blacklights/" style="font-size: 13.33px;">blacklights</a> <a href="/tags/branch/" style="font-size: 10px;">branch</a> <a href="/tags/cms/" style="font-size: 10px;">cms</a> <a href="/tags/content-blocks/" style="font-size: 10px;">content blocks</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/elasticsearch/" style="font-size: 10px;">elasticsearch</a> <a href="/tags/elk/" style="font-size: 10px;">elk</a> <a href="/tags/facets/" style="font-size: 10px;">facets</a> <a href="/tags/fedora/" style="font-size: 15px;">fedora</a> <a href="/tags/git/" style="font-size: 11.67px;">git</a> <a href="/tags/google/" style="font-size: 10px;">google+</a> <a href="/tags/heroku/" style="font-size: 11.67px;">heroku</a> <a href="/tags/hyrax/" style="font-size: 16.67px;">hyrax</a> <a href="/tags/java/" style="font-size: 11.67px;">java</a> <a href="/tags/kibana/" style="font-size: 10px;">kibana</a> <a href="/tags/logstash/" style="font-size: 10px;">logstash</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/ngrok/" style="font-size: 10px;">ngrok</a> <a href="/tags/notification/" style="font-size: 10px;">notification</a> <a href="/tags/oauth/" style="font-size: 10px;">oauth</a> <a href="/tags/python/" style="font-size: 13.33px;">python</a> <a href="/tags/rails/" style="font-size: 18.33px;">rails</a> <a href="/tags/refinery/" style="font-size: 10px;">refinery</a> <a href="/tags/ruby/" style="font-size: 11.67px;">ruby</a> <a href="/tags/samvera/" style="font-size: 18.33px;">samvera</a> <a href="/tags/slack/" style="font-size: 10px;">slack</a> <a href="/tags/solr/" style="font-size: 20px;">solr</a> <a href="/tags/tool/" style="font-size: 10px;">tool</a> <a href="/tags/vue-js/" style="font-size: 10px;">vue.js</a> <a href="/tags/webpacker/" style="font-size: 10px;">webpacker</a> <a href="/tags/zsh/" style="font-size: 10px;">zsh</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/hyrax-content-blocks/">How does Hyrax content blocks work?</a>
          </li>
        
          <li>
            <a href="/how-to-disable-download-notification-for-a-user/">How to disable download notifications to authors in IRIS</a>
          </li>
        
          <li>
            <a href="/ruby-aws-lambda/">Develop an AWS Lambda with Ruby</a>
          </li>
        
          <li>
            <a href="/python-aws-lambda/">Develop an AWS Lambda with Python</a>
          </li>
        
          <li>
            <a href="/how-to-build-a-slack-bot-in-python/">How to build a Slack bot in Python</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Frank<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>